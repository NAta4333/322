# Discord Бот - Автоматическая выдача ролей

## Описание проекта
Discord бот на Python, который автоматически выдает роль участника (member) новым пользователям при их входе на сервер.

## Технологии
- Python 3.11
- discord.py 2.6.3
- python-dotenv 1.1.1

## Архитектура
- `bot.py` - основной файл бота с обработчиками событий
- `.env.example` - пример файла с переменными окружения
- `.gitignore` - настроен для Python проектов

## Функциональность
- Автоматическое отслеживание события присоединения новых участников (on_member_join)
- Выдача указанной роли новым участникам
- Полное логирование всех действий в консоль
- Обработка ошибок (неверные права, отсутствие роли, проблемы с подключением)
- Безопасное хранение токенов через переменные окружения

## Настройка

### 1. Создание Discord бота
1. Перейдите на [Discord Developer Portal](https://discord.com/developers/applications)
2. Создайте новое приложение (New Application)
3. Перейдите в раздел "Bot" и создайте бота
4. Скопируйте токен бота (Bot Token)

### 2. Настройка Privileged Gateway Intents
В настройках бота на Discord Developer Portal включите:
- ✅ SERVER MEMBERS INTENT (обязательно!)
- ✅ PRESENCE INTENT (опционально)
- ✅ MESSAGE CONTENT INTENT (опционально)

### 3. Добавление бота на сервер
1. В Discord Developer Portal перейдите в OAuth2 > URL Generator
2. Выберите scopes: `bot`
3. Выберите Bot Permissions:
   - Manage Roles (обязательно для выдачи ролей)
   - View Channels
4. Скопируйте сгенерированную ссылку и откройте в браузере
5. Выберите сервер и добавьте бота

### 4. Получение ID роли
1. В Discord включите режим разработчика: Настройки > Расширенные > Режим разработчика
2. Правой кнопкой на роль > Копировать ID

### 5. Настройка переменных окружения в Replit
Добавьте в Secrets (замок слева):
- `DISCORD_BOT_TOKEN` - токен вашего Discord бота
- `MEMBER_ROLE_ID` - ID роли, которую нужно выдавать

### 6. Запуск бота
Бот запускается автоматически через workflow "Discord Bot".
После настройки переменных окружения нажмите "Restart" для перезапуска.

## Важные замечания
- Роль бота должна быть выше в иерархии, чем роль, которую он выдает
- У бота должно быть разрешение "Manage Roles"
- Privileged Gateway Intent "SERVER MEMBERS INTENT" должен быть включен
- Токен бота храните в секрете и никогда не публикуйте в коде

## Логирование
Бот выводит в консоль:
- ✓ Успешная выдача роли с именем участника и сервера
- ⚠ Ошибки конфигурации (отсутствие переменных)
- ⚠ Ошибки прав доступа
- ⚠ Ошибки подключения и HTTP запросов

## Последние изменения
- 05.10.2025: Создан базовый Discord бот с автоматической выдачей ролей
